---
---
<div id="pledge-container">
  <form id="pledge-form">
    <h2>Add Your Name â€” It Takes 10 Seconds</h2>
    <div>
      <label for="firstName">First Name <span>*</span></label>
      <input type="text" id="firstName" name="firstName" required placeholder="Jane" />
    </div>
    <div>
      <label for="lastName">Last Name <span>*</span></label>
      <input type="text" id="lastName" name="lastName" required placeholder="Doe" />
    </div>
    <div>
      <label for="email">Email <span>*</span></label>
      <input type="email" id="email" name="email" required placeholder="you@example.com" />
    </div>
    <div>
      <label for="state">State <span>*</span></label>
      <input type="text" id="state" name="state" required placeholder="California" />
    </div>
    <div>
      <label for="zip">Zip Code</label>
      <input type="text" id="zip" name="zip" placeholder="90210" />
    </div>
    <button type="submit">Sign the Pledge</button>
  </form>

  <div id="success-message" style="display: none;">
    <div>
      <h1>Welcome, Guardian.</h1>
      <p>
        Thank you for taking a stand for a smarter, more accountable government.
      </p>
      <p>
        Your voice has been added. Together, we are building a mandate for change that cannot be ignored.
      </p>
    </div>

    <h2>What's Next?</h2>

    <div>
        <h3>1. Read the Latest</h3>
        <p>Stay informed with our latest analysis and updates. We break down complex issues into clear, evidence-based insights.</p>
        <a href="/blog">Read the Blog &rarr;</a>
    </div>
    <div>
        <h3>2. Spread the Word</h3>
        <p>The Guard Pact grows stronger with every voice. Share it with friends, family, and on social media.</p>
        <a href="https://x.com/intent/tweet?text=I%20just%20signed%20the%20Guard%20Pact%20to%20demand%20a%20smarter%2C%20more%20accountable%20government.%20Join%20me%3A&url=https://guardpact.us/pledge" target="_blank">Share on X &rarr;</a>
    </div>
    <div>
        <h3>3. Dive Deeper</h3>
        <p>Explore the <a href="/docs/02-essential-points">19 Essential Points</a> of the Guard Pact and see the evidence-backed policies that form our framework.</p>
        <a href="/docs/02-essential-points">Explore the Policies &rarr;</a>
    </div>
  </div>
</div>

<script>
  document.getElementById("pledge-form")?.addEventListener("submit", async (e) => {
    e.preventDefault();
    const form = document.getElementById("pledge-form");
    const successMessage = document.getElementById("success-message");
    const formData = new FormData(e.target as HTMLFormElement);

    try {
      const res = await fetch("/api/pledge", {
        method: "POST",
        body: formData,
      });

      if (res.ok && form && successMessage) {
        form.style.display = "none";
        successMessage.style.display = "block";
      } else {
        const data = await res.json();
        alert(data.message || "There was an error submitting your pledge. Please try again.");
      }
    } catch (error) {
        console.error(error);
        alert("An unexpected error occurred. Please try again.");
    }
  });
</script>
