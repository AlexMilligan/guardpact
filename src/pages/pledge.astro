---
import BaseLayout from '../layouts/BaseLayout.astro';
import { Card, CardGrid } from '@astrojs/starlight/components';
import GuardPactLogo from '../components/GuardPactLogo.astro';
---
<BaseLayout title="Join the Guard Pact" description="Add your name to the growing list of Americans who believe government should be a shield — not a sword. No ideology. Just protection, fairness, and results.">
<div class="hero">
  <GuardPactLogo width={180} class="mb-8" />
  <h1>I’m in.<br />Count me as a Guardian.</h1>
  <p class="lead">
    By adding your name you’re saying: <strong>I want a government that protects life, gives every kid a fair shot, plays by one rulebook, follows evidence, and preserves maximum liberty with automatic brakes when things go wrong.</strong>
  </p>
  <p class="lead">That’s it. No party. No dogma. Just the five High-Level Goals that 90 %+ of Americans already agree on.</p>
</div>

<CardGrid stagger>
  <Card title="What you’re pledging to" icon="document">
    I support replacing divisive ideology at the federal level with the **Guard Pact’s 5 High-Level Goals** and the systematic controls (sunsets, circuit-breakers, prediction markets, citizen juries, and state labs) that keep government honest and effective.
  </Card>
  <Card title="What happens next" icon="rocket">
    - Your name appears on the public Guardian counter (first name + state only).<br />
    - You’ll get occasional, low-volume updates when we hit major milestones (never spam).<br />
    - When we reach critical mass, we deliver the Pact to every member of Congress and every 2028 presidential candidate.
  </Card>
</CardGrid>

<div class="pledge-form-wrapper not-prose">

<h2 class="text-2xl font-bold mb-6 text-center">Add Your Name — Takes 10 Seconds</h2>

<form
  name="guard-pact-pledge"
  method="POST"
  data-netlify="true"
  netlify-honeypot="bot-field"
  action="/pledge-success"
  class="pledge-form max-w-lg mx-auto"
>

  <input type="hidden" name="form-name" value="guard-pact-pledge" />
  <p class="hidden"><label>Don’t fill this out if you’re human: <input name="bot-field" /></label></p>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
    <div>
      <label for="firstName" class="block font-medium mb-1">First Name <span class="text-red-600">*</span></label>
      <input
        type="text"
        id="firstName"
        name="firstName"
        required
        placeholder="John"
        class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-brand focus:outline-none"
      />
    </div>
    <div>
      <label for="lastInitial" class="block font-medium mb-1">Last Initial <span class="text-red-600">*</span></label>
      <input
        type="text"
        id="lastInitial"
        name="lastInitial"
        required
        maxlength="1"
        placeholder="D"
        class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-brand focus:outline-none"
      />
    </div>
  </div>

  <div class="mb-4">
    <label for="state" class="block font-medium mb-1">State <span class="text-red-600">*</span></label>
    <select
      id="state"
      name="state"
      required
      class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-brand focus:outline-none"
    >
      <option value="" disabled selected>Select your state</option>
      <option value="AL">Alabama</option>
      <option value="AK">Alaska</option>
      <option value="AZ">Arizona</option>
      <option value="AR">Arkansas</option>
      <option value="CA">California</option>
      <option value="CO">Colorado</option>
      <option value="CT">Connecticut</option>
      <option value="DE">Delaware</option>
      <option value="FL">Florida</option>
      <option value="GA">Georgia</option>
      <option value="HI">Hawaii</option>
      <option value="ID">Idaho</option>
      <option value="IL">Illinois</option>
      <option value="IN">Indiana</option>
      <option value="IA">Iowa</option>
      <option value="KS">Kansas</option>
      <option value="KY">Kentucky</option>
      <option value="LA">Louisiana</option>
      <option value="ME">Maine</option>
      <option value="MD">Maryland</option>
      <option value="MA">Massachusetts</option>
      <option value="MI">Michigan</option>
      <option value="MN">Minnesota</option>
      <option value="MS">Mississippi</option>
      <option value="MO">Missouri</option>
      <option value="MT">Montana</option>
      <option value="NE">Nebraska</option>
      <option value="NV">Nevada</option>
      <option value="NH">New Hampshire</option>
      <option value="NJ">New Jersey</option>
      <option value="NM">New Mexico</option>
      <option value="NY">New York</option>
      <option value="NC">North Carolina</option>
      <option value="ND">North Dakota</option>
      <option value="OH">Ohio</option>
      <option value="OK">Oklahoma</option>
      <option value="OR">Oregon</option>
      <option value="PA">Pennsylvania</option>
      <option value="RI">Rhode Island</option>
      <option value="SC">South Carolina</option>
      <option value="SD">South Dakota</option>
      <option value="TN">Tennessee</option>
      <option value="TX">Texas</option>
      <option value="UT">Utah</option>
      <option value="VT">Vermont</option>
      <option value="VA">Virginia</option>
      <option value="WA">Washington</option>
      <option value="WV">West Virginia</option>
      <option value="WI">Wisconsin</option>
      <option value="WY">Wyoming</option>
      <option value="DC">Washington, DC</option>
    </select>
  </div>

  <div class="mb-6">
    <label for="email" class="block font-medium mb-1">Email (optional – only for rare, high-signal updates)</label>
    <input
      type="email"
      id="email"
      name="email"
      placeholder="you@example.com"
      class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-brand focus:outline-none"
    />
  </div>

  <div class="text-center">
    <button
      type="submit"
      class="btn-primary text-lg px-12 py-4"
    >
      I’m a Guardian → Add My Name
    </button>
  </div>

  <p class="text-sm text-center mt-6 text-slate-500">
    Your full name and email will never be public. We display only “First + Last Initial + State” on the live counter.
  </p>
</form>
</div>

<script>
  const form = document.querySelector('.pledge-form');
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const firstName = formData.get('firstName');
    const action = form.getAttribute('action');
    
    fetch(action, {
      method: 'POST',
      body: new URLSearchParams(formData).toString(),
      headers: { 'Content-Type': 'application/x-www-form-urlencoded' }
    }).then(() => {
      window.location.href = `/pledge-success?firstName=${encodeURIComponent(firstName)}`;
    }).catch((error) => {
      alert('An error occurred. Please try again.');
      console.error(error);
    });
  });
</script>

<style>
  .hero {
    text-align: center;
    max-width: 800px;
    margin: 0 auto 4rem;
    padding: 2rem 1rem;
  }
  .hero h1 {
    font-size: 3.5rem;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    font-weight: 900;
  }
  .lead {
    font-size: 1.25rem;
    line-height: 1.5;
    color: var(--sl-color-white);
    opacity: 0.9;
  }
  .pledge-form-wrapper {
    background: var(--sl-color-bg-nav);
    padding: 3rem 1.5rem;
    border-radius: 1rem;
    margin: 4rem auto;
  }
  .btn-primary {
    background: #c41e3a;
    color: white;
    font-weight: bold;
    border-radius: 0.5rem;
    transition: background 0.2s;
  }
  .btn-primary:hover {
    background: #a0172e;
  }
  @media (prefers-color-scheme: dark) {
    .pledge-form-wrapper {
      background: var(--sl-color-black);
    }
  }
</style>
</BaseLayout>
